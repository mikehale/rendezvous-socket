#!/usr/bin/env ruby

lib = File.expand_path('../../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)
require 'rendezvous/socket'

$DEBUG = true if ENV['DEBUG']

s = Rendezvous::Socket.new(ENV['RENDEZVOUS_SERVER']).open
s.puts Socket.gethostname
puts s.gets
s.close

i = 0
while true
  s.puts i = i + 1
  puts s.gets
  sleep 1
end
